drop database if exists WebPos;
create database if not exists WebPos;
use WebPos;
drop table if exists Admin;
create table if not exists Admin(
	id VARCHAR(6),
	name VARCHAR(100),
	nic VARCHAR(12),
	contactNo INT(10),
	username VARCHAR(100),
	password VARCHAR(100),
	address VARCHAR(100),
	constraint primary key(id)
);

drop table if exists cashier;
create table if not exists cashier(
    id VARCHAR(6),
    name VARCHAR(100),
    nic VARCHAR(12),
    contactNo INT(10),
    username VARCHAR(100),
    password VARCHAR(100),
    address VARCHAR(100),
    constraint primary key(id)
);

drop table if exists customer;
create table if not exists customer(
    id VARCHAR(6),
    name VARCHAR(100),
    contactNo INT(10),
    nic VARCHAR(12),
    address VARCHAR(100),
    CONSTRAINT PRIMARY KEY(id)
);

drop table if exists item;
create table if not exists item(
    itemCode VARCHAR(6),
    itemDescription VARCHAR(100),
    itemQty INT,
    itemBuyingPrice DOUBLE,
    itemUnitPrice DOUBLE,
    itemDiscount DOUBLE,
    CONSTRAINT PRIMARY KEY(itemCode)
);

drop table if exists `Order`;
create table if not exists `Order`(
    orderId VARCHAR(6),
    customerId VARCHAR(6),
    orderDate DATE,
    orderTime VARCHAR(20),
    discount DOUBLE,
    totalAmount DOUBLE,
    CONSTRAINT PRIMARY KEY(orderId),
    CONSTRAINT FOREIGN KEY(customerId) REFERENCES Customer(id) ON DELETE CASCADE ON UPDATE CASCADE
);

drop table if exists OrderDetails;
create table if not exists OrderDetails(
    orderId VARCHAR(6),
    itemCode VARCHAR(6),
    itemDescription VARCHAR(100),
    itemQty INT,
    itemPrice DOUBLE,
    itemDiscount DOUBLE,
    total DOUBLE,
    CONSTRAINT PRIMARY KEY(orderId,itemCode),
    CONSTRAINT FOREIGN KEY (orderId) REFERENCES `Order` (orderId) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT FOREIGN KEY (itemCode) REFERENCES Item (itemCode) ON DELETE CASCADE ON UPDATE CASCADE
);